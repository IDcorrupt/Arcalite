[gd_scene load_steps=37 format=3 uid="uid://ctrs8f1p3hiil"]

[ext_resource type="Script" uid="uid://c75dg41hv5caf" path="res://Scripts/Game/Enemies/HeavyMelee.cs" id="1_ok2i2"]
[ext_resource type="Texture2D" uid="uid://0x82hxgnliyh" path="res://Assets/Sprites/enemies/Cyclops v2.0/Sprite/ATTACK_1.png" id="2_be4g7"]
[ext_resource type="Texture2D" uid="uid://bgpj3elpihvtk" path="res://Assets/Sprites/enemies/Cyclops v2.0/Sprite/DEATH.png" id="3_tuy4g"]
[ext_resource type="Texture2D" uid="uid://bgm06x4ru26al" path="res://Assets/Sprites/enemies/Cyclops v2.0/Sprite/HURT.png" id="4_slfrr"]
[ext_resource type="Texture2D" uid="uid://w50owlsnvg3f" path="res://Assets/Sprites/enemies/Cyclops v2.0/Sprite/IDLE.png" id="5_70hsh"]
[ext_resource type="Texture2D" uid="uid://ggu6p8nmltwo" path="res://Assets/Sprites/enemies/Cyclops v2.0/Sprite/WALK.png" id="6_45gw2"]

[sub_resource type="AtlasTexture" id="AtlasTexture_0yis5"]
atlas = ExtResource("2_be4g7")
region = Rect2(0, 0, 158, 125)

[sub_resource type="AtlasTexture" id="AtlasTexture_yhury"]
atlas = ExtResource("2_be4g7")
region = Rect2(158, 0, 158, 125)

[sub_resource type="AtlasTexture" id="AtlasTexture_e0286"]
atlas = ExtResource("2_be4g7")
region = Rect2(316, 0, 158, 125)

[sub_resource type="AtlasTexture" id="AtlasTexture_67xl4"]
atlas = ExtResource("2_be4g7")
region = Rect2(474, 0, 158, 125)

[sub_resource type="AtlasTexture" id="AtlasTexture_m3ddq"]
atlas = ExtResource("2_be4g7")
region = Rect2(632, 0, 158, 125)

[sub_resource type="AtlasTexture" id="AtlasTexture_arhyk"]
atlas = ExtResource("2_be4g7")
region = Rect2(790, 0, 158, 125)

[sub_resource type="AtlasTexture" id="AtlasTexture_xgaem"]
atlas = ExtResource("2_be4g7")
region = Rect2(948, 0, 158, 125)

[sub_resource type="AtlasTexture" id="AtlasTexture_wi8bg"]
atlas = ExtResource("3_tuy4g")
region = Rect2(0, 0, 158, 125)

[sub_resource type="AtlasTexture" id="AtlasTexture_rc453"]
atlas = ExtResource("3_tuy4g")
region = Rect2(158, 0, 158, 125)

[sub_resource type="AtlasTexture" id="AtlasTexture_b1mx8"]
atlas = ExtResource("3_tuy4g")
region = Rect2(316, 0, 158, 125)

[sub_resource type="AtlasTexture" id="AtlasTexture_n1a6s"]
atlas = ExtResource("3_tuy4g")
region = Rect2(474, 0, 158, 125)

[sub_resource type="AtlasTexture" id="AtlasTexture_ujqla"]
atlas = ExtResource("3_tuy4g")
region = Rect2(632, 0, 158, 125)

[sub_resource type="AtlasTexture" id="AtlasTexture_bwoyy"]
atlas = ExtResource("3_tuy4g")
region = Rect2(790, 0, 158, 125)

[sub_resource type="AtlasTexture" id="AtlasTexture_o1s75"]
atlas = ExtResource("3_tuy4g")
region = Rect2(948, 0, 158, 125)

[sub_resource type="AtlasTexture" id="AtlasTexture_omqno"]
atlas = ExtResource("3_tuy4g")
region = Rect2(1106, 0, 158, 125)

[sub_resource type="AtlasTexture" id="AtlasTexture_5u76i"]
atlas = ExtResource("4_slfrr")
region = Rect2(0, 0, 158, 125)

[sub_resource type="AtlasTexture" id="AtlasTexture_gtm3r"]
atlas = ExtResource("4_slfrr")
region = Rect2(158, 0, 158, 125)

[sub_resource type="AtlasTexture" id="AtlasTexture_xp7ap"]
atlas = ExtResource("4_slfrr")
region = Rect2(316, 0, 158, 125)

[sub_resource type="AtlasTexture" id="AtlasTexture_3k8j1"]
atlas = ExtResource("5_70hsh")
region = Rect2(0, 0, 158, 125)

[sub_resource type="AtlasTexture" id="AtlasTexture_jfiak"]
atlas = ExtResource("5_70hsh")
region = Rect2(158, 0, 158, 125)

[sub_resource type="AtlasTexture" id="AtlasTexture_rcvxo"]
atlas = ExtResource("5_70hsh")
region = Rect2(316, 0, 158, 125)

[sub_resource type="AtlasTexture" id="AtlasTexture_t4nvc"]
atlas = ExtResource("6_45gw2")
region = Rect2(0, 0, 158, 125)

[sub_resource type="AtlasTexture" id="AtlasTexture_8623m"]
atlas = ExtResource("6_45gw2")
region = Rect2(158, 0, 158, 125)

[sub_resource type="AtlasTexture" id="AtlasTexture_w16bp"]
atlas = ExtResource("6_45gw2")
region = Rect2(316, 0, 158, 125)

[sub_resource type="AtlasTexture" id="AtlasTexture_gcxcf"]
atlas = ExtResource("6_45gw2")
region = Rect2(474, 0, 158, 125)

[sub_resource type="AtlasTexture" id="AtlasTexture_33ap3"]
atlas = ExtResource("6_45gw2")
region = Rect2(632, 0, 158, 125)

[sub_resource type="AtlasTexture" id="AtlasTexture_q3eg1"]
atlas = ExtResource("6_45gw2")
region = Rect2(790, 0, 158, 125)

[sub_resource type="SpriteFrames" id="SpriteFrames_l32ot"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_0yis5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_yhury")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_e0286")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_67xl4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_m3ddq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_arhyk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xgaem")
}],
"loop": false,
"name": &"attack1",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_0yis5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_yhury")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_e0286")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_67xl4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_m3ddq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_arhyk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xgaem")
}],
"loop": false,
"name": &"attack2",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_wi8bg")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rc453")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_b1mx8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_n1a6s")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ujqla")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bwoyy")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_o1s75")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_omqno")
}],
"loop": false,
"name": &"die",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_5u76i")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gtm3r")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xp7ap")
}],
"loop": false,
"name": &"hurt",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_3k8j1")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jfiak")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rcvxo")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_t4nvc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8623m")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_w16bp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gcxcf")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_33ap3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_q3eg1")
}],
"loop": true,
"name": &"walk",
"speed": 8.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_m1jxv"]
size = Vector2(68, 68)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_de3kb"]
size = Vector2(67.5, 67.5)

[node name="HeavyMelee" type="CharacterBody2D"]
collision_layer = 2
collision_mask = 132
floor_max_angle = 0.802851
script = ExtResource("1_ok2i2")

[node name="Sprite" type="AnimatedSprite2D" parent="."]
position = Vector2(1, -12.5)
sprite_frames = SubResource("SpriteFrames_l32ot")
animation = &"idle"
frame_progress = 0.52462
flip_h = true

[node name="DirectionTimer" type="Timer" parent="."]
one_shot = true
autostart = true

[node name="RoamCooldown" type="Timer" parent="."]
wait_time = 3.0
one_shot = true

[node name="AttackCooldown" type="Timer" parent="."]
one_shot = true

[node name="HurtTimer" type="Timer" parent="."]
one_shot = true

[node name="ChaseBuffer" type="Timer" parent="."]
one_shot = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("RectangleShape2D_m1jxv")

[node name="AttackRange" type="Area2D" parent="."]
collision_layer = 0

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="AttackRange"]
polygon = PackedVector2Array(-34, -34, 34, -34, 34, -17, 50, -17, 63, -3, 63, 18, 50, 31, 34, 31, 34, 34, -34, 34)

[node name="JumpTrigger" type="Area2D" parent="."]
position = Vector2(0, -78)
collision_layer = 0
collision_mask = 4

[node name="CollisionShape2D" type="CollisionShape2D" parent="JumpTrigger"]
position = Vector2(46, 5)
shape = SubResource("RectangleShape2D_de3kb")
debug_color = Color(0.615686, 0.356863, 1, 0.419608)

[node name="ObstacleDetect" type="Area2D" parent="."]
collision_layer = 0
collision_mask = 4

[node name="right" type="CollisionPolygon2D" parent="ObstacleDetect"]
modulate = Color(0, 0.15, 1, 1)
position = Vector2(42, -0.5)
polygon = PackedVector2Array(-8, 34.5, -8, -33.5, 9, -33.5)

[node name="left" type="CollisionPolygon2D" parent="ObstacleDetect"]
modulate = Color(0, 0.15, 1, 1)
position = Vector2(-25, -0.5)
polygon = PackedVector2Array(-9, 34.5, -9, -33.5, -26, -33.5)
disabled = true

[node name="LineOfSight" type="RayCast2D" parent="."]
target_position = Vector2(110, 0)
collision_mask = 133

[connection signal="animation_finished" from="Sprite" to="." method="OnSpriteAnimationFinished"]
[connection signal="timeout" from="DirectionTimer" to="." method="OnDirectionTimerTimeout"]
[connection signal="timeout" from="RoamCooldown" to="." method="OnRoamCoolDownTimeout"]
[connection signal="timeout" from="AttackCooldown" to="." method="AtkCooldownTimeout"]
[connection signal="timeout" from="HurtTimer" to="." method="OnHurtTimerTimeout"]
[connection signal="timeout" from="ChaseBuffer" to="." method="OnChaseBufferTimeout"]
[connection signal="body_entered" from="AttackRange" to="." method="AttackRangeBodyEntered"]
[connection signal="body_exited" from="AttackRange" to="." method="AttackRangeBodyExited"]
